Started by user [8mha:////4KFShIluNpntRkGwEztqjcAKT7fE8GUEH9Fsuk7XEYjJAAAAmx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzmEgZ+/dLi1CL91MT0pMTKxLxMADEm21TEAAAA[0mEli
Running as SYSTEM
Building in workspace /var/lib/jenkins/workspace/EOL Connectors/Environmental tagger for EOL resources
[Environmental tagger for EOL resources] $ /bin/sh -xe /tmp/jenkins2680311926126532517.sh
+ cd /u/scripts/eol_php_code/
+ php update_resources/connectors/environments_2_eol.php _ '{"task": "generate_eol_tags", "resource":"AmphibiaWeb text", "resource_id":"21_ENV", "subjects":"Distribution"}'


File truncated: [/u/scripts/vangelis_tagger/eol_tags/eol_tags.tsv]

File truncated: [/u/scripts/vangelis_tagger/eol_tags/eol_tags_noParentTerms.tsv]
Please wait, downloading resource document... :: [lib/connectors/Environments2EOLAPI.php [31]]<br>
/u/scripts/eol_php_code_tmp/dir_33610/ :: [lib/connectors/Environments2EOLAPI.php [31]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_33610/ :: [lib/connectors/Environments2EOLAPI.php [31]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_33610/21.tar.gz :: [lib/connectors/Environments2EOLAPI.php [31]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_33610/21.tar.gz] :: [lib/connectors/Environments2EOLAPI.php [31]]<br>
Array
(
    [archive_path] => /u/scripts/eol_php_code_tmp/dir_33610/
    [temp_dir] => /u/scripts/eol_php_code_tmp/dir_33610/
)
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_33610//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

process media tab...

1,000
2,000
3,000
Run run_environment_tagger()...
4,000
5,000
6,000
7,000
Run run_environment_tagger()...
8,000
Last round...

Should be NOT empty - OK 
Run run_environment_tagger()...
Should be empty - OK
Array
(
    [subjects] => Array
        (
            [http://rs.tdwg.org/ontology/voc/SPMInfoItems#Distribution] => 
        )

    [titles] => Array
        (
            [Distribution and Habitat] => 
        )

)

Run gen_noParentTerms()...

save_media_metadata_for_these_objects()...
json temp path: /u/scripts/vangelis_tagger/temp_json/

1,000
2,000
3,000
4,000
5,000
6,000
7,000
8,000
save_agent_metadata_for_these_agents()...
json temp path: /u/scripts/vangelis_tagger/temp_json/

Creating this directory: [/u/scripts/eol_php_code/applications/content_server/resources//21_ENV_working/]

Converting archive to EOL DwCA...
Please wait, downloading resource document... :: [lib/connectors/DwCA_Utility.php [115]]<br>
/u/scripts/eol_php_code_tmp/dir_48935/ :: [lib/connectors/DwCA_Utility.php [115]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_48935/ :: [lib/connectors/DwCA_Utility.php [115]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_48935/21.tar.gz :: [lib/connectors/DwCA_Utility.php [115]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_48935/21.tar.gz] :: [lib/connectors/DwCA_Utility.php [115]]<br>
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_48935//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

processing...: [http://rs.gbif.org/terms/1.0/vernacularname]: vernacular...

processing...: [http://eol.org/schema/reference/reference]: reference...

processing...: [http://eol.org/schema/agent/agent]: agent...

processing...: [http://eol.org/schema/media/document]: document...

processing...: [http://rs.tdwg.org/dwc/terms/taxon]: taxon...

1,000
2,000
3,000
4,000
5,000
6,000
7,000
8,000
9,000
10,000
11,000Array
(
    [legacy filter] => Array
        (
            [excluded uris occurrences] => 262
        )

)

 temporary directory removed: /u/scripts/eol_php_code_tmp/dir_48935/
 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/agent.tab] :: [lib/Functions.php [457]]<br>

 total: [743]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/measurement_or_fact_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [9102]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/media_resource.tab] :: [lib/Functions.php [457]]<br>

 total: [8138]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/occurrence_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [9102]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/reference.tab] :: [lib/Functions.php [457]]<br>

 total: [5353]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/taxon.tab] :: [lib/Functions.php [457]]<br>

 total: [2283]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/vernacular_name.tab] :: [lib/Functions.php [457]]<br>

 total: [2090]
 :: [lib/Functions.php [457]]<br>
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENV/meta.xml : only attempt :: [lib/Functions.php [236]]<br>

Undefined URIs: 0

----------Checking unique IDs [21_ENV]...----------
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENV//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)
Array
(
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)

 reference  -- OK

 agent  -- OK

 document  -- OK

 taxon  -- OK

 occurrence  -- OK

 measurementorfact  -- OK

----------end Checking unique IDs----------
Completed update_resources/connectors/environments_2_eol.php :: [ []]<br>
+ php update_resources/connectors/environments_2_eol.php _ '{"task": "apply_formats_filters", "resource_id":"21_ENVO"}'


Creating this directory: [/u/scripts/eol_php_code/applications/content_server/resources//21_ENVO_working/]

Converting archive to EOL DwCA...
Please wait, downloading resource document... :: [lib/connectors/DwCA_Utility.php [115]]<br>
/u/scripts/eol_php_code_tmp/dir_08985/ :: [lib/connectors/DwCA_Utility.php [115]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_08985/ :: [lib/connectors/DwCA_Utility.php [115]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_08985/21_ENV.tar.gz :: [lib/connectors/DwCA_Utility.php [115]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_08985/21_ENV.tar.gz] :: [lib/connectors/DwCA_Utility.php [115]]<br>
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_08985//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

processing...: [http://rs.gbif.org/terms/1.0/vernacularname]: vernacular...

processing...: [http://eol.org/schema/reference/reference]: reference...

processing...: [http://eol.org/schema/agent/agent]: agent...

processing...: [http://eol.org/schema/media/document]: document...

processing...: [http://rs.tdwg.org/dwc/terms/taxon]: taxon...


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Terms_remapped/DATA_1841_terms_remapped.tsv :: [lib/connectors/TraitGeneric.php [133]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_81115.file :: [lib/connectors/TraitGeneric.php [133]]<br>

remapped_terms lib: 141


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/terrestrial_taxa.tsv :: [lib/connectors/EnvironmentsFilters.php [67]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_40220.file :: [lib/connectors/EnvironmentsFilters.php [67]]<br>

[https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/terrestrial_taxa.tsv: 6620] [6619]


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/dangling terrestrial taxa.txt :: [lib/connectors/EnvironmentsFilters.php [67]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_04523.file :: [lib/connectors/EnvironmentsFilters.php [67]]<br>

[https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/dangling terrestrial taxa.txt: 1435] [7287]

process_measurementorfact...(get occurID_mValue)

process_occurrence...(get taxonID_occurIDs)

process_taxon...(get taxonName_occurID_mValue)

process_measurementorfact...(apply deletions)

process_occurrence...(apply deletions)

 temporary directory removed: /u/scripts/eol_php_code_tmp/dir_08985/
 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/agent.tab] :: [lib/Functions.php [457]]<br>

 total: [743]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/measurement_or_fact_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [9102]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/media_resource.tab] :: [lib/Functions.php [457]]<br>

 total: [8138]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/occurrence_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [9102]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/reference.tab] :: [lib/Functions.php [457]]<br>

 total: [5353]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/taxon.tab] :: [lib/Functions.php [457]]<br>

 total: [2283]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/vernacular_name.tab] :: [lib/Functions.php [457]]<br>

 total: [2090]
 :: [lib/Functions.php [457]]<br>
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [http://purl.obolibrary.org/obo/ENVO_01001240] => 
)

Undefined URIs: 1

----------Checking unique IDs [21_ENVO]...----------
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENVO//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/measurementorfact
    [6] => http://rs.tdwg.org/dwc/terms/occurrence
)
Array
(
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/measurementorfact
    [6] => http://rs.tdwg.org/dwc/terms/occurrence
)

 reference  -- OK

 agent  -- OK

 document  -- OK

 taxon  -- OK

 measurementorfact  -- OK

 occurrence  -- OK

----------end Checking unique IDs----------

----end----
elapsed time = 18.54 seconds 
elapsed time = 0.31 minutes 
elapsed time = 0.01 hours 

Done processing.
Completed update_resources/connectors/environments_2_eol.php :: [ []]<br>
+ php update_resources/connectors/environments_2_eol.php _ '{"task": "apply_formats_filters_latest", "resource_id":"21_final"}'


Creating this directory: [/u/scripts/eol_php_code/applications/content_server/resources//21_final_working/]

Converting archive to EOL DwCA...
Please wait, downloading resource document... :: [lib/connectors/DwCA_Utility.php [115]]<br>
/u/scripts/eol_php_code_tmp/dir_98920/ :: [lib/connectors/DwCA_Utility.php [115]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_98920/ :: [lib/connectors/DwCA_Utility.php [115]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_98920/21_ENVO.tar.gz :: [lib/connectors/DwCA_Utility.php [115]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_98920/21_ENVO.tar.gz] :: [lib/connectors/DwCA_Utility.php [115]]<br>
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_98920//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

processing...: [http://rs.gbif.org/terms/1.0/vernacularname]: vernacular...

processing...: [http://eol.org/schema/reference/reference]: reference...

processing...: [http://eol.org/schema/agent/agent]: agent...

processing...: [http://eol.org/schema/media/document]: document...


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Terms_remapped/DATA_1841_terms_remapped.tsv :: [lib/connectors/TraitGeneric.php [133]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_20693.file :: [lib/connectors/TraitGeneric.php [133]]<br>

remapped_terms lib: 141

remapped_terms local: 141

process process_taxon()...
Array
(
)

process process_measurementorfact_info()...

 temporary directory removed: /u/scripts/eol_php_code_tmp/dir_98920/
 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/agent.tab] :: [lib/Functions.php [457]]<br>

 total: [743]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/measurement_or_fact.tab] :: [lib/Functions.php [457]]<br>

 total: [8961]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/media_resource.tab] :: [lib/Functions.php [457]]<br>

 total: [8138]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/occurrence.tab] :: [lib/Functions.php [457]]<br>

 total: [8961]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/reference.tab] :: [lib/Functions.php [457]]<br>

 total: [5353]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/taxon.tab] :: [lib/Functions.php [457]]<br>

 total: [2283]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/vernacular_name.tab] :: [lib/Functions.php [457]]<br>

 total: [2090]
 :: [lib/Functions.php [457]]<br>
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_final/meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [http://purl.obolibrary.org/obo/ENVO_01001240] => 
)

Undefined URIs: 1

----------Checking unique IDs [21_final]...----------
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_final//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)
Array
(
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)

 reference  -- OK

 agent  -- OK

 document  -- OK

 taxon  -- OK

 occurrence  -- OK

 measurementorfact  -- OK

----------end Checking unique IDs----------

----end----
elapsed time = 47.52 seconds 
elapsed time = 0.79 minutes 
elapsed time = 0.01 hours 

Done processing.
Completed update_resources/connectors/environments_2_eol.php :: [ []]<br>
+ cd /u/scripts/eol_php_code/applications/content_server/resources/
+ cp 21_ENV.tar.gz /home/eagbayani/
+ cp 21_ENVO.tar.gz /home/eagbayani/
+ cp 21_final.tar.gz /home/eagbayani/
+ cd /home/eagbayani/
+ chmod 775 21_ENV.tar.gz
+ chmod 775 21_ENVO.tar.gz
+ chmod 775 21_final.tar.gz
Finished: SUCCESS
