Started by user [8mha:////4KFShIluNpntRkGwEztqjcAKT7fE8GUEH9Fsuk7XEYjJAAAAmx+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzmEgZ+/dLi1CL91MT0pMTKxLxMADEm21TEAAAA[0mEli
Running as SYSTEM
Building in workspace /var/lib/jenkins/workspace/EOL Connectors/Environmental tagger for EOL resources/AmphibiaWeb text (21)
[AmphibiaWeb text (21)] $ /bin/sh -xe /tmp/jenkins2122341591919949830.sh
+ cd /u/scripts/eol_php_code/
+ php update_resources/connectors/environments_2_eol.php _ '{"task": "generate_eol_tags", "resource":"AmphibiaWeb text", "resource_id":"21", "subjects":"Distribution"}'

Array
(
    [task] => generate_eol_tags
    [resource] => AmphibiaWeb text
    [resource_id] => 21_ENV
    [subjects] => Distribution
)
Array
(
    [AmphibiaWeb text] => https://editors.eol.org/eol_php_code/applications/content_server/resources/21.tar.gz
)

File truncated: [/u/scripts/vangelis_tagger/eol_tags/eol_tags.tsv]

File truncated: [/u/scripts/vangelis_tagger/eol_tags/eol_tags_noParentTerms.tsv]
Please wait, downloading resource document... :: [lib/connectors/Environments2EOLAPI.php [48]]<br>
/u/scripts/eol_php_code_tmp/dir_25270/ :: [lib/connectors/Environments2EOLAPI.php [48]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_25270/ :: [lib/connectors/Environments2EOLAPI.php [48]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_25270/21.tar.gz :: [lib/connectors/Environments2EOLAPI.php [48]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_25270/21.tar.gz] :: [lib/connectors/Environments2EOLAPI.php [48]]<br>
Array
(
    [archive_path] => /u/scripts/eol_php_code_tmp/dir_25270/
    [temp_dir] => /u/scripts/eol_php_code_tmp/dir_25270/
)
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_25270//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
)

process media tab...

Run run_environment_tagger()...every 1000 records.

1,000
2,000
3,000
4,000
5,000
6,000
7,000
8,000
Last round...

Should be NOT empty - OK 
Run run_environment_tagger()...
Should be empty - OK
Array
(
    [subjects] => Array
        (
            [http://rs.tdwg.org/ontology/voc/SPMInfoItems#Distribution] => 
        )

)

Cleaning eol_tags.tsv...

Copied OK (eol_tags.tsv)

 eol_tags.tsv.old (46330 /u/scripts/vangelis_tagger/eol_tags/eol_tags.tsv.old
)

 eol_tags.tsv (46330 /u/scripts/vangelis_tagger/eol_tags/eol_tags.tsv
)

Run gen_noParentTerms()...

Cleaning noParentTerms...

Copied OK (eol_tags_noParentTerms.tsv)

2. eol_tags_noParentTerms.tsv.old (11110 /u/scripts/vangelis_tagger/eol_tags/eol_tags_noParentTerms.tsv.old
)

2. eol_tags_noParentTerms.tsv (8806 /u/scripts/vangelis_tagger/eol_tags/eol_tags_noParentTerms.tsv
)

save_media_metadata_for_these_objects()...
json temp path: /u/scripts/vangelis_tagger/temp_json/

1,000
2,000
3,000
4,000
5,000
6,000
7,000
8,000
save_agent_metadata_for_these_agents()...
json temp path: /u/scripts/vangelis_tagger/temp_json/

Creating this directory: [/u/scripts/eol_php_code/applications/content_server/resources//21_ENV_working/]

Converting archive to EOL DwCA...
Please wait, downloading resource document... :: [lib/connectors/DwCA_Utility.php [116]]<br>
/u/scripts/eol_php_code_tmp/dir_93800/ :: [lib/connectors/DwCA_Utility.php [116]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_93800/ :: [lib/connectors/DwCA_Utility.php [116]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_93800/21.tar.gz :: [lib/connectors/DwCA_Utility.php [116]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_93800/21.tar.gz] :: [lib/connectors/DwCA_Utility.php [116]]<br>
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_93800//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

processing...DwCA_Utility...: [http://rs.gbif.org/terms/1.0/vernacularname]: vernacular...

processing...DwCA_Utility...: [http://eol.org/schema/reference/reference]: reference...

processing...DwCA_Utility...: [http://eol.org/schema/agent/agent]: agent...

processing...DwCA_Utility...: [http://eol.org/schema/media/document]: document...

processing...DwCA_Utility...: [http://rs.tdwg.org/dwc/terms/taxon]: taxon...

Environments2EOLfinal resource_id: [21_ENV]

Processing...Environments2EOLfinal...21_ENV

1,000
2,000
3,000
4,000
5,000
6,000
7,000
8,000Array
(
    [legacy filter] => Array
        (
            [excluded uris occurrences] => 222
        )

)

 temporary directory removed: /u/scripts/eol_php_code_tmp/dir_93800/
 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/agent.tab] :: [lib/Functions.php [457]]<br>

 total: [743]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/measurement_or_fact_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [7202]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/media_resource.tab] :: [lib/Functions.php [457]]<br>

 total: [8138]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/occurrence_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [7202]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/reference.tab] :: [lib/Functions.php [457]]<br>

 total: [5353]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/taxon.tab] :: [lib/Functions.php [457]]<br>

 total: [2283]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENV/vernacular_name.tab] :: [lib/Functions.php [457]]<br>

 total: [2090]
 :: [lib/Functions.php [457]]<br>
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENV/meta.xml : only attempt :: [lib/Functions.php [236]]<br>

Undefined URIs: 0

----------Checking unique IDs [21_ENV]...----------
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENV//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)
Array
(
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)

 reference  -- OK

 agent  -- OK

 document  -- OK

 taxon  -- OK

 occurrence  -- OK

 measurementorfact  -- OK

----------end Checking unique IDs----------
Completed update_resources/connectors/environments_2_eol.php :: [ []]<br>
+ php update_resources/connectors/environments_2_eol.php _ '{"task": "apply_formats_filters", "resource_id":"21"}'


Creating this directory: [/u/scripts/eol_php_code/applications/content_server/resources//21_ENVO_working/]

Converting archive to EOL DwCA...
Please wait, downloading resource document... :: [lib/connectors/DwCA_Utility.php [116]]<br>
/u/scripts/eol_php_code_tmp/dir_69146/ :: [lib/connectors/DwCA_Utility.php [116]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_69146/ :: [lib/connectors/DwCA_Utility.php [116]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_69146/21_ENV.tar.gz :: [lib/connectors/DwCA_Utility.php [116]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_69146/21_ENV.tar.gz] :: [lib/connectors/DwCA_Utility.php [116]]<br>
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_69146//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

processing...DwCA_Utility...: [http://rs.gbif.org/terms/1.0/vernacularname]: vernacular...

processing...DwCA_Utility...: [http://eol.org/schema/reference/reference]: reference...

processing...DwCA_Utility...: [http://eol.org/schema/agent/agent]: agent...

processing...DwCA_Utility...: [http://eol.org/schema/media/document]: document...

processing...DwCA_Utility...: [http://rs.tdwg.org/dwc/terms/taxon]: taxon...


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Terms_remapped/DATA_1841_terms_remapped.tsv :: [lib/connectors/TraitGeneric.php [133]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_34760.file :: [lib/connectors/TraitGeneric.php [133]]<br>

remapped_terms lib: 141


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/terrestrial_taxa.tsv :: [lib/connectors/EnvironmentsFilters.php [67]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_70479.file :: [lib/connectors/EnvironmentsFilters.php [67]]<br>

[https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/terrestrial_taxa.tsv: 6620] [6619]


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/dangling terrestrial taxa.txt :: [lib/connectors/EnvironmentsFilters.php [67]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_32917.file :: [lib/connectors/EnvironmentsFilters.php [67]]<br>

[https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Environments/dangling terrestrial taxa.txt: 1435] [7287]

process_measurementorfact...(get occurID_mValue)

process_occurrence...(get taxonID_occurIDs)

process_taxon...(get taxonName_occurID_mValue)

process_measurementorfact...(apply deletions)

process_occurrence...(apply deletions)

combination deleted MoF: No. of taxa with 1 or more MoF records removed: 0

 temporary directory removed: /u/scripts/eol_php_code_tmp/dir_69146/
 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/agent.tab] :: [lib/Functions.php [457]]<br>

 total: [743]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/measurement_or_fact_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [7202]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/media_resource.tab] :: [lib/Functions.php [457]]<br>

 total: [8138]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/occurrence_specific.tab] :: [lib/Functions.php [457]]<br>

 total: [7202]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/reference.tab] :: [lib/Functions.php [457]]<br>

 total: [5353]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/taxon.tab] :: [lib/Functions.php [457]]<br>

 total: [2283]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/vernacular_name.tab] :: [lib/Functions.php [457]]<br>

 total: [2090]
 :: [lib/Functions.php [457]]<br>
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENVO/meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [http://purl.obolibrary.org/obo/ENVO_01001240] => 
)

Undefined URIs: 1

----------Checking unique IDs [21_ENVO]...----------
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_ENVO//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/measurementorfact
    [6] => http://rs.tdwg.org/dwc/terms/occurrence
)
Array
(
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/measurementorfact
    [6] => http://rs.tdwg.org/dwc/terms/occurrence
)

 reference  -- OK

 agent  -- OK

 document  -- OK

 taxon  -- OK

 measurementorfact  -- OK

 occurrence  -- OK

----------end Checking unique IDs----------

----end----
elapsed time = 17.74 seconds 
elapsed time = 0.3 minutes 

Done processing.
Completed update_resources/connectors/environments_2_eol.php :: [ []]<br>
+ php update_resources/connectors/environments_2_eol.php _ '{"task": "apply_formats_filters_latest", "resource_id":"21"}'


Creating this directory: [/u/scripts/eol_php_code/applications/content_server/resources//21_final_working/]

Converting archive to EOL DwCA...
Please wait, downloading resource document... :: [lib/connectors/DwCA_Utility.php [116]]<br>
/u/scripts/eol_php_code_tmp/dir_07109/ :: [lib/connectors/DwCA_Utility.php [116]]<br>
temp_dir: /u/scripts/eol_php_code_tmp/dir_07109/ :: [lib/connectors/DwCA_Utility.php [116]]<br>
Extracting... /u/scripts/eol_php_code_tmp/dir_07109/21_ENVO.tar.gz :: [lib/connectors/DwCA_Utility.php [116]]<br>
archive path: [/u/scripts/eol_php_code_tmp/dir_07109/21_ENVO.tar.gz] :: [lib/connectors/DwCA_Utility.php [116]]<br>
Sending get request to file:///u/scripts/eol_php_code_tmp/dir_07109//meta.xml : only attempt :: [lib/Functions.php [236]]<br>

processing...DwCA_Utility...: [http://rs.gbif.org/terms/1.0/vernacularname]: vernacular...

processing...DwCA_Utility...: [http://eol.org/schema/reference/reference]: reference...

processing...DwCA_Utility...: [http://eol.org/schema/agent/agent]: agent...

processing...DwCA_Utility...: [http://eol.org/schema/media/document]: document...


 Saving remote file: https://github.com/eliagbayani/EOL-connector-data-files/raw/master/Terms_remapped/DATA_1841_terms_remapped.tsv :: [lib/connectors/TraitGeneric.php [133]]<br>


 Temporary file: /u/scripts/eol_php_code_tmp/tmp_18312.file :: [lib/connectors/TraitGeneric.php [133]]<br>

remapped_terms lib: 141

remapped_terms local: 141

process process_taxon()...
Array
(
)

process process_measurementorfact_info()...

 temporary directory removed: /u/scripts/eol_php_code_tmp/dir_07109/
 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/agent.tab] :: [lib/Functions.php [457]]<br>

 total: [743]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/measurement_or_fact.tab] :: [lib/Functions.php [457]]<br>

 total: [7094]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/media_resource.tab] :: [lib/Functions.php [457]]<br>

 total: [8138]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/occurrence.tab] :: [lib/Functions.php [457]]<br>

 total: [7094]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/reference.tab] :: [lib/Functions.php [457]]<br>

 total: [5353]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/taxon.tab] :: [lib/Functions.php [457]]<br>

 total: [2283]
 :: [lib/Functions.php [457]]<br>

 counting: [/u/scripts/eol_php_code/applications/content_server/resources/21_final/vernacular_name.tab] :: [lib/Functions.php [457]]<br>

 total: [2090]
 :: [lib/Functions.php [457]]<br>
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_final/meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [http://purl.obolibrary.org/obo/ENVO_01001240] => 
)

Undefined URIs: 1

----------Checking unique IDs [21_final]...----------
Sending get request to file:///u/scripts/eol_php_code/applications/content_server/resources/21_final//meta.xml : only attempt :: [lib/Functions.php [236]]<br>
Array
(
    [0] => http://rs.gbif.org/terms/1.0/vernacularname
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)
Array
(
    [1] => http://eol.org/schema/reference/reference
    [2] => http://eol.org/schema/agent/agent
    [3] => http://eol.org/schema/media/document
    [4] => http://rs.tdwg.org/dwc/terms/taxon
    [5] => http://rs.tdwg.org/dwc/terms/occurrence
    [6] => http://rs.tdwg.org/dwc/terms/measurementorfact
)

 reference  -- OK

 agent  -- OK

 document  -- OK

 taxon  -- OK

 occurrence  -- OK

 measurementorfact  -- OK

----------end Checking unique IDs----------

----end----
elapsed time = 47.03 seconds 
elapsed time = 0.78 minutes 
elapsed time = 0.01 hours 

Done processing.
Completed update_resources/connectors/environments_2_eol.php :: [ []]<br>
+ cd /u/scripts/eol_php_code/applications/content_server/resources/
+ sshpass -f /home/eagbayani/.pwd_file scp 21_final.tar.gz eagbayani@eol-archive:/extra/eol_php_resources/.

"WARNING"

You are accessing a Smithsonian Institution computer system which is 
operated as a U.S. Government information system., Unauthorized 
access, use, or modification of this system or of data contained 
herein, or in transit to/from this system, may constitute a violation 
of the Computer Fraud and Abuse Act section 1030 (18 on the U.S. 
Code)., Violators are subject to criminal and civil penalties., While 
using Smithsonian computers and networks, you should have no 
expectation of privacy. 

System usage may be monitored, recorded and subject to audit. Use of 
this system indicates consent to monitoring and recording., All 
computer users must read and understand Smithsonian Directive 931, Use 
of Computers, Telecommunications Devices and Networks, acknowledge 
acceptance of the User Agreement, and annually complete on-line 
computer security awareness training., Any violation of these policies 
or a suspected computer security incident should be promptly reported 
to the Smithsonian: OCIO Help Desk: OCIOHelp@si.edu 202-633-4000.

+ sshpass -f /home/eagbayani/.pwd_file scp EOL_FreshData_connectors.txt eagbayani@eol-archive:/extra/eol_php_resources/eol_backend2_connectors.txt

"WARNING"

You are accessing a Smithsonian Institution computer system which is 
operated as a U.S. Government information system., Unauthorized 
access, use, or modification of this system or of data contained 
herein, or in transit to/from this system, may constitute a violation 
of the Computer Fraud and Abuse Act section 1030 (18 on the U.S. 
Code)., Violators are subject to criminal and civil penalties., While 
using Smithsonian computers and networks, you should have no 
expectation of privacy. 

System usage may be monitored, recorded and subject to audit. Use of 
this system indicates consent to monitoring and recording., All 
computer users must read and understand Smithsonian Directive 931, Use 
of Computers, Telecommunications Devices and Networks, acknowledge 
acceptance of the User Agreement, and annually complete on-line 
computer security awareness training., Any violation of these policies 
or a suspected computer security incident should be promptly reported 
to the Smithsonian: OCIO Help Desk: OCIOHelp@si.edu 202-633-4000.

Finished: SUCCESS
